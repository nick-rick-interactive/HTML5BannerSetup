var BannerCanvas,Test_728x90,banner,bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;BannerCanvas=function(){function t(t,e,i,n){switch(null==t&&(t=0),null==e&&(e=0),null==i&&(i="in-page"),null==n&&(n=3),this.addCounter=bind(this.addCounter,this),this.switchFunc=bind(this.switchFunc,this),this.autoClose=bind(this.autoClose,this),this.close=bind(this.close,this),this.toggleExpand=bind(this.toggleExpand,this),this.storeElement=bind(this.storeElement,this),this.storeElements=bind(this.storeElements,this),this.replay=bind(this.replay,this),this.exit=bind(this.exit,this),this.end=bind(this.end,this),this.collapseFinishHandler=bind(this.collapseFinishHandler,this),this.collapseStartHandler=bind(this.collapseStartHandler,this),this.expandFinishHandler=bind(this.expandFinishHandler,this),this.expandStartHandler=bind(this.expandStartHandler,this),this.closeInit=bind(this.closeInit,this),this.expandInit=bind(this.expandInit,this),this.init=bind(this.init,this),this.checkVisible=bind(this.checkVisible,this),this.enablerInitHandler=bind(this.enablerInitHandler,this),this.width=t,this.height=e,this.type=i,this.loop=n,this.curLoop=1,this.canvas=document.getElementById("main"),this.stage=new createjs.Stage(this.canvas),this.els={},this.storeElements($("#elements").children().toArray()),console.log(this.els),TweenMax.ticker.addEventListener("tick",this.stage.update,this.stage),this.stage.update(),this.type){case"in-page":this.els.overlay.addEventListener("click",this.exit),this.els.cta.addEventListener("click",this.exit);break;case"expanding":this.els.overlay.addEventListener("click",this.exit),this.els.cta.addEventListener("click",this.toggleExpand),this.els["overlay-exp"].addEventListener("click",this.exit),this.els["cta-exp"].addEventListener("click",this.exit),this.els["close-exp"].addEventListener("click",this.toggleExpand);break;case"floating":this.els.overlay.addEventListener("click",this.exit),this.els.cta.addEventListener("click",this.toggleExpand),this.els["overlay-float"].addEventListener("click",this.exit),this.els["cta-float"].addEventListener("click",this.exit),this.els["close-float"].addEventListener("click",this.close)}"in-page"!==this.type&&(Enabler.addEventListener(studio.events.StudioEvent.EXPAND_START,this.expandStartHandler),Enabler.addEventListener(studio.events.StudioEvent.EXPAND_FINISH,this.expandFinishHandler),Enabler.addEventListener(studio.events.StudioEvent.COLLAPSE_START,this.collapseStartHandler),Enabler.addEventListener(studio.events.StudioEvent.COLLAPSE_FINISH,this.collapseFinishHandler)),Enabler.isInitialized()?this.enablerInitHandler():Enabler.addEventListener(studio.events.StudioEvent.INIT,this.enablerInitHandler)}return t.prototype.enablerInitHandler=function(t){return Enabler.isPageLoaded()?this.checkVisible():Enabler.addEventListener(studio.events.StudioEvent.PAGE_LOADED,this.checkVisible)},t.prototype.checkVisible=function(t){return Enabler.isVisible()?this.init():Enabler.addEventListener(studio.events.StudioEvent.VISIBLE,this.init)},t.prototype.init=function(t){return alert("you must add an init function to the extended coffeescript class")},t.prototype.expandInit=function(){return alert("you must add an expand init function to the extended coffeescript class")},t.prototype.closeInit=function(){return alert("you must add an close init function to the extended coffeescript class")},t.prototype.expandStartHandler=function(t){return Enabler.finishExpand()},t.prototype.expandFinishHandler=function(t){return this.isExpanded=!0,this.expandInit()},t.prototype.collapseStartHandler=function(t){return Enabler.finishCollapse()},t.prototype.collapseFinishHandler=function(t){return this.isCollapsed=!0},t.prototype.end=function(t,e,i){return null==i&&(i=[]),this.curLoop===this.loop?clearInterval(this.switchInt):(this.curLoop++,this.replay(t,e,i))},t.prototype.exit=function(t){return this.switchInt&&clearInterval(this.switchInt),Enabler.exit("exit")},t.prototype.replay=function(t,e,i){var n,s,r,a;for(a=this.els,s=0,r=a.length;r>s;s++)n=a[s],$.inArray($(n).attr("id"),i)>-1&&$(n).removeAttr("style");return this.switchFunc(t,e)},t.prototype.storeElements=function(t,e){var i,n,s,r,a;for(null==e&&(e=null),r=t.reverse(),a=[],n=0,s=r.length;s>n;n++)i=r[n],a.push(this.storeElement(i,e));return a},t.prototype.storeElement=function(t,e){var i,n;return null==e&&(e=null),console.log($(t).attr("id")),$(t).children().length>0?(i=new createjs.Container,i.x=Number($(t).css("left").replace("px","")),i.y=Number($(t).css("top").replace("px","")),this.els[$(t).attr("id")]=i,this.stage.addChild(i),this.storeElements($(t).children().toArray(),i)):($(t).is("img")?n=new createjs.Bitmap($(t).attr("src")):(n=new createjs.Shape,n.graphics.drawRect(0,0,Number($(t).css("width").replace("px","")),Number($(t).css("height").replace("px","")))),n.x=Number($(t).css("left").replace("px","")),n.y=Number($(t).css("top").replace("px","")),console.log(n.x+" "+$(t).css("left")),this.els[$(t).attr("id")]=n,e?e.addChild(n):this.stage.addChild(n))},t.prototype.toggleExpand=function(){return this.isExpanded=this.isExpanded?Enabler.requestCollapse():Enabler.requestExpand()},t.prototype.close=function(){return Enabler.reportManualClose(),Enabler.close(),this.closeInit()},t.prototype.autoClose=function(){return this.autoTimer&&clearInterval(this.autoTimer),Enabler.close(),this.closeInit()},t.prototype.switchFunc=function(t,e){return null==e&&(e=0),this.switchInt&&clearInterval(this.switchInt),this.switchInt=setInterval(t,1e3*e)},t.prototype.addCounter=function(t,e){return $(t).click(function(t){return function(){return Enabler.counter(e)}}(this))},t}(),Test_728x90=function(t){function e(){return this.finish=bind(this.finish,this),this.phase1=bind(this.phase1,this),this.init=bind(this.init,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.init=function(){return this.phase1()},e.prototype.phase1=function(){return this.switchFunc(this.finish,1.5)},e.prototype.finish=function(){return this.curLoop===this.loop?this.end(this.init):TweenMax.to($("#start"),.3,{rotationX:-90,opacity:0,y:$("#start").height()/2,ease:Back.easeIn,delay:.3,onComplete:function(t){return function(){return t.end(t.init)}}(this)})},e}(BannerCanvas),banner="",$(document).ready(function(){return banner=new Test_728x90(728,90,"in-page",3)});