var BannerCanvas,Test_728x90,banner,bind=function(e,t){return function(){return e.apply(t,arguments)}},extend=function(e,t){function s(){this.constructor=e}for(var i in t)hasProp.call(t,i)&&(e[i]=t[i]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;BannerCanvas=function(){function e(e,t,s,i){switch(null==e&&(e=0),null==t&&(t=0),null==s&&(s="in-page"),null==i&&(i=3),this.addCounter=bind(this.addCounter,this),this.switchFunc=bind(this.switchFunc,this),this.autoClose=bind(this.autoClose,this),this.close=bind(this.close,this),this.toggleExpand=bind(this.toggleExpand,this),this.storeElement=bind(this.storeElement,this),this.storeElements=bind(this.storeElements,this),this.replay=bind(this.replay,this),this.exit=bind(this.exit,this),this.end=bind(this.end,this),this.collapseFinishHandler=bind(this.collapseFinishHandler,this),this.collapseStartHandler=bind(this.collapseStartHandler,this),this.expandFinishHandler=bind(this.expandFinishHandler,this),this.expandStartHandler=bind(this.expandStartHandler,this),this.closeInit=bind(this.closeInit,this),this.expandInit=bind(this.expandInit,this),this.init=bind(this.init,this),this.checkVisible=bind(this.checkVisible,this),this.enablerInitHandler=bind(this.enablerInitHandler,this),this.width=e,this.height=t,this.type=s,this.loop=i,this.curLoop=1,this.canvas=document.getElementById("main"),this.stage=new createjs.Stage(this.canvas),this.els={},this.OG={},this.storeElements($("#elements").children().toArray()),console.log(this.els),TweenMax.ticker.addEventListener("tick",this.stage.update,this.stage),this.stage.update(),this.type){case"in-page":this.els.overlay.addEventListener("click",this.exit),this.els.cta.addEventListener("click",this.exit);break;case"expanding":this.els.overlay.addEventListener("click",this.exit),this.els.cta.addEventListener("click",this.toggleExpand),this.els["overlay-exp"].addEventListener("click",this.exit),this.els["cta-exp"].addEventListener("click",this.exit),this.els["close-exp"].addEventListener("click",this.toggleExpand);break;case"floating":this.els.overlay.addEventListener("click",this.exit),this.els.cta.addEventListener("click",this.toggleExpand),this.els["overlay-float"].addEventListener("click",this.exit),this.els["cta-float"].addEventListener("click",this.exit),this.els["close-float"].addEventListener("click",this.close)}"in-page"!==this.type&&(Enabler.addEventListener(studio.events.StudioEvent.EXPAND_START,this.expandStartHandler),Enabler.addEventListener(studio.events.StudioEvent.EXPAND_FINISH,this.expandFinishHandler),Enabler.addEventListener(studio.events.StudioEvent.COLLAPSE_START,this.collapseStartHandler),Enabler.addEventListener(studio.events.StudioEvent.COLLAPSE_FINISH,this.collapseFinishHandler)),Enabler.isInitialized()?this.enablerInitHandler():Enabler.addEventListener(studio.events.StudioEvent.INIT,this.enablerInitHandler)}return e.prototype.enablerInitHandler=function(e){return console.log("enabler"),Enabler.isPageLoaded()?this.checkVisible():Enabler.addEventListener(studio.events.StudioEvent.PAGE_LOADED,this.checkVisible)},e.prototype.checkVisible=function(e){return console.log("visible"),Enabler.isVisible()?this.init():Enabler.addEventListener(studio.events.StudioEvent.VISIBLE,this.init)},e.prototype.init=function(e){return alert("you must add an init function to the extended coffeescript class")},e.prototype.expandInit=function(){return alert("you must add an expand init function to the extended coffeescript class")},e.prototype.closeInit=function(){return alert("you must add an close init function to the extended coffeescript class")},e.prototype.expandStartHandler=function(e){return Enabler.finishExpand()},e.prototype.expandFinishHandler=function(e){return this.isExpanded=!0,this.expandInit()},e.prototype.collapseStartHandler=function(e){return Enabler.finishCollapse()},e.prototype.collapseFinishHandler=function(e){return this.isCollapsed=!0},e.prototype.end=function(e,t,s){return null==s&&(s=[]),this.curLoop===this.loop?clearInterval(this.switchInt):(this.curLoop++,this.replay(e,t,s))},e.prototype.exit=function(e){return this.switchInt&&clearInterval(this.switchInt),Enabler.exit("exit")},e.prototype.replay=function(e,t,s){var i,n,a,h,l,r,o,c;for(console.log("yee"),o=this.els,n=0,h=o.length;h>n;n++)if(i=o[n],$.inArray(i,s)>-1)for(c=this.els[i],a=0,l=c.length;l>a;a++)r=c[a],console.log(i(0+r(NaN+this.OG[i][r]+" "+this.els[i][r]))),this.els[i][r]=this.OG[i][r];return this.switchFunc(e,t)},e.prototype.storeElements=function(e,t){var s,i,n,a,h;for(null==t&&(t=null),a=e.reverse(),h=[],i=0,n=a.length;n>i;i++)s=a[i],h.push(this.storeElement(s,t));return h},e.prototype.storeElement=function(e,t){var s,i;return null==t&&(t=null),$(e).children().length>0?(s=(new createjs.Container).set(),s.x=Number($(e).css("left").replace("px","")),s.y=Number($(e).css("top").replace("px","")),s.alpha=Number($(e).css("opacity").replace("px","")),this.els[$(e).attr("id")]=s,this.OG[$(e).attr("id")]=s.clone,this.stage.addChild(s),this.storeElements($(e).children().toArray(),s)):($(e).is("img")?i=new createjs.Bitmap($(e).attr("src")):(console.log($(e).attr("id")),i=new createjs.Shape,i.width=Number($(e).css("width").replace("px","")),i.height=Number($(e).css("height").replace("px","")),i.graphics.beginFill("rgba(255,0,0,0)"),i.graphics.drawRect(0,0,Number($(e).css("width").replace("px","")),Number($(e).css("height").replace("px","")))),i.name=$(e).attr("id"),i.x=Number($(e).css("left").replace("px","")),i.y=Number($(e).css("top").replace("px","")),i.alpha=Number($(e).css("opacity").replace("px","")),this.els[$(e).attr("id")]=i,this.OG[$(e).attr("id")]=i.clone,t?t.addChild(i):this.stage.addChild(i))},e.prototype.toggleExpand=function(){return this.isExpanded=this.isExpanded?Enabler.requestCollapse():Enabler.requestExpand()},e.prototype.close=function(){return Enabler.reportManualClose(),Enabler.close(),this.closeInit()},e.prototype.autoClose=function(){return this.autoTimer&&clearInterval(this.autoTimer),Enabler.close(),this.closeInit()},e.prototype.switchFunc=function(e,t){return null==t&&(t=0),this.switchInt&&clearInterval(this.switchInt),this.switchInt=setInterval(e,1e3*t)},e.prototype.addCounter=function(e,t){return $(e).click(function(e){return function(){return Enabler.counter(t)}}(this))},e}(),Test_728x90=function(e){function t(){return this.ctaOut=bind(this.ctaOut,this),this.ctaOver=bind(this.ctaOver,this),this.preLoop=bind(this.preLoop,this),this.finish=bind(this.finish,this),this.phase3=bind(this.phase3,this),this.phase2=bind(this.phase2,this),this.phase1=bind(this.phase1,this),this.setup=bind(this.setup,this),this.init=bind(this.init,this),t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.init=function(){return this.clubSpeed=.4,this.els.blur_club.filters=[new createjs.BlurFilter(24,24,2)],this.setup(),this.phase1()},t.prototype.setup=function(){var e,t;for(console.log("setup"),TweenMax.set(this.els.cta,{x:this.OG.cta.x-50}),TweenMax.set(this.els.boeing,{x:this.OG.boeing.x-30}),TweenMax.set(this.els.blur_club,{x:this.OG.blur_club.x-50,alpha:1}),e=t=3;t>=1;e=--t)TweenMax.set(this.els["txt_"+e],{x:0,alpha:1,scale:.9}),TweenMax.set(this.els["scene_"+e],{x:0,alpha:1}),this.els["scene_"+e+"_mask"].cache(0,0,this.els["scene_"+e+"_mask"].width,this.els["scene_"+e+"_mask"].height),this.els["scene_"+e].cache(0,0,this.els["scene_"+e+"_mask"].width,this.els["scene_"+e+"_mask"].height),this.els["scene_"+e].mask=this.els["scene_"+e+"_mask"],TweenMax.set(this.els["scene_"+e+"_mask"],{x:0,width:this.OG["scene_"+e+"_mask"].width,alpha:1});return TweenMax.set(this.els.club,{x:this.OG.club.x-50,alpha:1})},t.prototype.phase1=function(){return console.log("phase1"),TweenMax.set(this.els.blur_club,{x:0}),TweenMax.to(this.els.txt_1,1,{x:0,delay:.1,scale:1}),TweenMax.to(this.els.scene_1_mask,this.clubSpeed-.1,{width:this.width,delay:.1,ease:"Linear.easeNone"}),TweenMax.to(this.els.blur_club,this.clubSpeed,{x:2*this.width+50,ease:"Linear.easeNone"}),this.switchFunc(this.phase2,2.5)},t.prototype.phase2=function(){return TweenMax.set(this.els.txt_3,{alpha:1}),TweenMax.set(this.els.scene_3,{x:0,width:"0px",alpha:1}),TweenMax.set(this.els.club,{x:200,alpha:1}),TweenMax.set(this.els.blur_club,{x:0}),TweenMax.to(this.els.txt_1,this.clubSpeed,{ease:"Linear.easeNone"}),TweenMax.to(this.els.scene_1_mask,this.clubSpeed,{x:this.width,width:0,ease:"Linear.easeNone"}),TweenMax.to(this.els.txt_2,1,{x:0,delay:.1,scale:1}),TweenMax.to(this.els.scene_2_mask,this.clubSpeed-.1,{width:this.width,delay:.1,ease:"Linear.easeNone"}),TweenMax.to(this.els.boeing,.6,{x:0,alpha:1,delay:.1}),TweenMax.to(this.els.blur_club,this.clubSpeed,{x:2*this.width+50,ease:"Linear.easeNone"}),this.switchFunc(this.phase3,2.5)},t.prototype.phase3=function(){return TweenMax.set(this.els.blur_club,{x:0}),TweenMax.to(this.els.txt_2,this.clubSpeed,{ease:"Linear.easeNone"}),TweenMax.to(this.els.scene_2_mask,this.clubSpeed,{x:this.width,width:0,ease:"Linear.easeNone"}),TweenMax.to(this.els.txt_3,.5,{x:0,delay:.3}),TweenMax.to(this.els.scene_3_mask,this.clubSpeed-.1,{width:this.width,delay:.1,ease:"Linear.easeNone"}),TweenMax.to(this.els.club,.5,{x:this.OG.club.x,delay:.2}),TweenMax.to(this.els.cta,.5,{x:this.OG.cta.x,alpha:1,delay:1}),this.els.cta.addEventListener("mouseover",this.ctaOver),this.els.cta.addEventListener("mouseout",this.ctaOut),TweenMax.to(this.els.blur_club,this.clubSpeed,{x:2*this.width+50,ease:"Linear.easeNone"}),this.switchFunc(this.finish,3.5)},t.prototype.finish=function(){return this.curLoop===this.loop?this.end(this.init):(TweenMax.to(this.els.boeing,.3,{alpha:0,x:20}),TweenMax.to(this.els.cta,.3,{alpha:0,x:20,onComplete:function(e){return function(){return e.end(e.preLoop,0,["txt_3","scene_3","club"])}}(this)}))},t.prototype.preLoop=function(){return this.setup(),console.log("postsetup"),this.els.cta.removeEventListener("mouseover",this.ctaOver),this.els.cta.removeEventListener("mouseout",this.ctaOut),TweenMax.set(this.els.txt_3,{x:this.OG.txt_3.x}),TweenMax.set(this.els.scene_3,{width:this.width}),TweenMax.set(this.els.club,{x:this.OG.club.x}),TweenMax.to(this.els.txt_3,this.clubSpeed,{}),TweenMax.to(this.els.club,this.clubSpeed,{x:-this.width}),TweenMax.to(this.els.scene_3,this.clubSpeed,{x:this.width,width:0}),this.phase1()},t.prototype.ctaOver=function(){return TweenMax.to(this.els.cta,.2,{x:3})},t.prototype.ctaOut=function(){return TweenMax.to(this.els.cta,.2,{x:0})},t}(BannerCanvas),banner="",$(document).ready(function(){return banner=new Test_728x90(728,90,"in-page",3)});